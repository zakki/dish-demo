<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimal-ui" />
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon-precomposed" href="res/icon240.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="block3 - HSP3Dish">
    <title>block3 - HSP3Dish</title>
    <style>
      body {
        font-family: arial;
        margin: 0;
        padding: none;
      }

      .emscripten { padding-right: 0; margin-left: auto; margin-right: auto; display: block; }
      div.emscripten { text-align: center; }
      /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
      canvas.emscripten {
        border: 0px none;
        width: 100%;
        height: 100%;
	  }
      .canvaswrapper {
        width: 100vw;
        height: calc(800 / 480 * 100vw);
        max-height: 100vh;
        max-width: calc(480 / 800 * 100vh);
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
      }

      #emscripten_logo {
        display: inline-block;
        margin: 0;
      }

      .spinner {
        height: 30px;
        width: 30px;
        margin: 0;
        margin-top: 20px;
        margin-left: 20px;
        display: inline-block;
        vertical-align: top;

        -webkit-animation: rotation .8s linear infinite;
        -moz-animation: rotation .8s linear infinite;
        -o-animation: rotation .8s linear infinite;
        animation: rotation 0.8s linear infinite;

        border-left: 5px solid rgb(235, 235, 235);
        border-right: 5px solid rgb(235, 235, 235);
        border-bottom: 5px solid rgb(235, 235, 235);
        border-top: 5px solid rgb(120, 120, 120);

        border-radius: 100%;
        background-color: rgb(189, 215, 46);
      }

      @-webkit-keyframes rotation {
        from {-webkit-transform: rotate(0deg);}
        to {-webkit-transform: rotate(360deg);}
      }
      @-moz-keyframes rotation {
        from {-moz-transform: rotate(0deg);}
        to {-moz-transform: rotate(360deg);}
      }
      @-o-keyframes rotation {
        from {-o-transform: rotate(0deg);}
        to {-o-transform: rotate(360deg);}
      }
      @keyframes rotation {
        from {transform: rotate(0deg);}
        to {transform: rotate(360deg);}
      }

      #status {
        display: inline-block;
        vertical-align: top;
        margin-top: 30px;
        margin-left: 20px;
        font-weight: bold;
        color: rgb(120, 120, 120);
      }

      #progress {
        height: 20px;
        width: 30px;
      }

      #output {
        width: 100%;
        height: 200px;
        margin: 0 auto;
        margin-top: 10px;
        display: block;
        background-color: black;
        color: white;
        font-family: 'Lucida Console', Monaco, monospace;
        outline: none;
      }
    </style>
  </head>
  <body>
    <div class="spinner" id='spinner'></div>
    <div class="emscripten" id="status">Downloading...</div>

<span id='controls'>
  <span><input type="hidden" id="resize"></span>
  <span><input type="hidden" id="pointerLock"></span>
  <span><input type="hidden" value="Fullscreen" onclick="Module.requestFullScreen(document.getElementById('pointerLock').checked,
                                                                            document.getElementById('resize').checked)">
  </span>
</span>

    <div class="emscripten">
      <progress value="0" max="100" id="progress" hidden=1></progress>
    </div>


    <div class="canvaswrapper">
      <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    </div>

    <script type='text/javascript'>
      var statusElement = document.getElementById('status');
      var progressElement = document.getElementById('progress');
      var spinnerElement = document.getElementById('spinner');

      var Module = {
        INITIAL_MEMORY: 209715200,
        preRun: [],
        postRun: [],
        print: (function() {
          var element = document.getElementById('output');
          if (element) element.value = ''; // clear browser cache
          return function(text) {
            text = Array.prototype.slice.call(arguments).join(' ');
            // These replacements are necessary if you render to raw HTML
            //text = text.replace(/&/g, "&amp;");
            //text = text.replace(/</g, "&lt;");
            //text = text.replace(/>/g, "&gt;");
            //text = text.replace('\n', '<br>', 'g');
            console.log(text);
            if (element) {
              element.value += text + "\n";
              element.scrollTop = element.scrollHeight; // focus on bottom
            }
          };
        })(),
        printErr: function(text) {
          text = Array.prototype.slice.call(arguments).join(' ');
          if (0) { // XXX disabled for safety typeof dump == 'function') {
            dump(text + '\n'); // fast, straight to the real console
          } else {
            console.error(text);
          }
        },
        canvas: document.getElementById('canvas'),
        setStatus: function(text) {
          if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
          if (text === Module.setStatus.text) return;
          var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
          var now = Date.now();
          if (m && now - Date.now() < 30) return; // if this is a progress update, skip it if too soon
          if (m) {
            text = m[1];
            progressElement.value = parseInt(m[2])*100;
            progressElement.max = parseInt(m[4])*100;
            progressElement.hidden = false;
            spinnerElement.hidden = false;
          } else {
            progressElement.value = null;
            progressElement.max = null;
            progressElement.hidden = true;
            if (!text) spinnerElement.style.display = 'none';
          }
          statusElement.innerHTML = text;
        },
        totalDependencies: 0,
        monitorRunDependencies: function(left) {
          this.totalDependencies = Math.max(this.totalDependencies, left);
          Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
        },
        arguments: ["block3.ax"]
      };
      Module.setStatus('Downloading...');

/* block.js */

var Module;
if (typeof Module === 'undefined') Module = eval('(function() { try { return Module || {} } catch(e) { return {} } })()');
if (!Module.expectedDataFileDownloads) {
  Module.expectedDataFileDownloads = 0;
  Module.finishedDataFileDownloads = 0;
}
Module.expectedDataFileDownloads++;
(function() {

    var PACKAGE_PATH;
    if (typeof window === 'object') {
      PACKAGE_PATH = window['encodeURIComponent'](window.location.pathname.toString().substring(0, window.location.pathname.toString().lastIndexOf('/')) + '/');
    } else {
      // worker
      PACKAGE_PATH = encodeURIComponent(location.pathname.toString().substring(0, location.pathname.toString().lastIndexOf('/')) + '/');
    }
    var PACKAGE_NAME = 'block3.data';
    var REMOTE_PACKAGE_NAME = (Module['filePackagePrefixURL'] || '') + 'block3.data';
    var REMOTE_PACKAGE_SIZE = 27980306;
    var PACKAGE_UUID = '51f84d03-0c74-4552-ac13-924e79e76977';

    function fetchRemotePackage(packageName, packageSize, callback, errback) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', packageName, true);
      xhr.responseType = 'arraybuffer';
      xhr.onprogress = function(event) {
        var url = packageName;
        var size = packageSize;
        if (event.total) size = event.total;
        if (event.loaded) {
          if (!xhr.addedTotal) {
            xhr.addedTotal = true;
            if (!Module.dataFileDownloads) Module.dataFileDownloads = {};
            Module.dataFileDownloads[url] = {
              loaded: event.loaded,
              total: size
            };
          } else {
            Module.dataFileDownloads[url].loaded = event.loaded;
          }
          var total = 0;
          var loaded = 0;
          var num = 0;
          for (var download in Module.dataFileDownloads) {
          var data = Module.dataFileDownloads[download];
            total += data.total;
            loaded += data.loaded;
            num++;
          }
          total = Math.ceil(total * Module.expectedDataFileDownloads/num);
          if (Module['setStatus']) Module['setStatus']('Downloading data... (' + loaded + '/' + total + ')');
        } else if (!Module.dataFileDownloads) {
          if (Module['setStatus']) Module['setStatus']('Downloading data...');
        }
      };
      xhr.onload = function(event) {
        var packageData = xhr.response;
        callback(packageData);
      };
      xhr.send(null);
    };

    function handleError(error) {
      console.error('package error:', error);
    };

      var fetched = null, fetchedCallback = null;
      fetchRemotePackage(REMOTE_PACKAGE_NAME, REMOTE_PACKAGE_SIZE, function(data) {
        if (fetchedCallback) {
          fetchedCallback(data);
          fetchedCallback = null;
        } else {
          fetched = data;
        }
      }, handleError);

  function runWithFS() {

function assert(check, msg) {
  if (!check) throw msg + new Error().stack;
}



    function DataRequest(start, end, crunched, audio) {
      this.start = start;
      this.end = end;
      this.crunched = crunched;
      this.audio = audio;
    }
    DataRequest.prototype = {
      requests: {},
      open: function(mode, name) {
        this.name = name;
        this.requests[name] = this;
        Module['addRunDependency']('fp ' + this.name);
      },
      send: function() {},
      onload: function() {
        var byteArray = this.byteArray.subarray(this.start, this.end);

          this.finish(byteArray);

      },
      finish: function(byteArray) {
        var that = this;
        Module['FS_createPreloadedFile'](this.name, null, byteArray, true, true, function() {
          Module['removeRunDependency']('fp ' + that.name);
        }, function() {
          if (that.audio) {
            Module['removeRunDependency']('fp ' + that.name); // workaround for chromium bug 124926 (still no audio with this, but at least we don't hang)
          } else {
            Module.printErr('Preloading file ' + that.name + ' failed');
          }
        }, false, true); // canOwn this data in the filesystem, it is a slide into the heap that will never change
        this.requests[this.name] = null;
      },
    };

      new DataRequest(0, 2474, 0, 0).open('GET', 'block3.ax');
      new DataRequest(2474, 7328, 0, 0).open('GET', 'alternate.bmp');
      new DataRequest(7328, 12182, 0, 0).open('GET', 'back.bmp');
      new DataRequest(12182, 12260, 0, 0).open('GET', 'backup.cfg');
      new DataRequest(12260, 1781788, 0, 0).open('GET', 'baku.bmp');
      new DataRequest(1781788, 1960381, 0, 0).open('GET', 'baku.png');
      new DataRequest(1960381, 2079308, 0, 0).open('GET', 'ball64.png');
      new DataRequest(2079308, 3361047, 0, 0).open('GET', 'bg.png');
      new DataRequest(3361047, 3454073, 0, 0).open('GET', 'bg01.jpg');
      new DataRequest(3454073, 3537530, 0, 0).open('GET', 'bg02.jpg');
      new DataRequest(3537530, 3622967, 0, 0).open('GET', 'bg03.jpg');
      new DataRequest(3622967, 3724147, 0, 0).open('GET', 'bg04.jpg');
      new DataRequest(3724147, 3940917, 0, 0).open('GET', 'bg05.jpg');
      new DataRequest(3940917, 4014653, 0, 0).open('GET', 'bg06.jpg');
      new DataRequest(4014653, 4101989, 0, 0).open('GET', 'bg07.jpg');
      new DataRequest(4101989, 4179283, 0, 0).open('GET', 'bg08.jpg');
      new DataRequest(4179283, 4275777, 0, 0).open('GET', 'bg09.jpg');
      new DataRequest(4275777, 4421786, 0, 0).open('GET', 'bg10.jpg');
      new DataRequest(4421786, 4438764, 0, 0).open('GET', 'bgm04.mid');
      new DataRequest(4438764, 4444542, 0, 0).open('GET', 'bgm06.mid');
      new DataRequest(4444542, 4457562, 0, 0).open('GET', 'bgm1.mid');
      new DataRequest(4457562, 4487963, 0, 0).open('GET', 'bgm10.mid');
      new DataRequest(4487963, 4501679, 0, 0).open('GET', 'bgm11.mid');
      new DataRequest(4501679, 4562115, 0, 0).open('GET', 'bgm12.mid');
      new DataRequest(4562115, 4595231, 0, 0).open('GET', 'bgm13.mid');
      new DataRequest(4595231, 4642109, 0, 0).open('GET', 'bgm14.mid');
      new DataRequest(4642109, 4665633, 0, 0).open('GET', 'bgm15.mid');
      new DataRequest(4665633, 4688359, 0, 0).open('GET', 'bgm16.mid');
      new DataRequest(4688359, 4727124, 0, 0).open('GET', 'bgm17.mid');
      new DataRequest(4727124, 4744373, 0, 0).open('GET', 'bgm18.mid');
      new DataRequest(4744373, 4767729, 0, 0).open('GET', 'bgm19.mid');
      new DataRequest(4767729, 4805206, 0, 0).open('GET', 'bgm2.mid');
      new DataRequest(4805206, 4827161, 0, 0).open('GET', 'bgm20.mid');
      new DataRequest(4827161, 4863879, 0, 0).open('GET', 'bgm3.mid');
      new DataRequest(4863879, 4903702, 0, 0).open('GET', 'bgm5.mid');
      new DataRequest(4903702, 4933970, 0, 0).open('GET', 'bgm7.mid');
      new DataRequest(4933970, 4970445, 0, 0).open('GET', 'bgm8.mid');
      new DataRequest(4970445, 5003074, 0, 0).open('GET', 'bgm9.mid');
      new DataRequest(5003074, 5026294, 0, 0).open('GET', 'bgpeas.bmp');
      new DataRequest(5026294, 5039268, 0, 0).open('GET', 'bgpeas.png');
      new DataRequest(5039268, 5145818, 0, 0).open('GET', 'bgsmoke.bmp');
      new DataRequest(5145818, 5178155, 0, 0).open('GET', 'bgsmoke.png');
      new DataRequest(5178155, 5194223, 0, 0).open('GET', 'bgtex.bmp');
      new DataRequest(5194223, 5205888, 0, 0).open('GET', 'bgtex.png');
      new DataRequest(5205888, 5210742, 0, 0).open('GET', 'black.bmp');
      new DataRequest(5210742, 5277276, 0, 0).open('GET', 'bom.bmp');
      new DataRequest(5277276, 5300993, 0, 0).open('GET', 'bom.png');
      new DataRequest(5300993, 5305129, 0, 0).open('GET', 'btn_hard.bmp');
      new DataRequest(5305129, 5307506, 0, 0).open('GET', 'btn_hard.png');
      new DataRequest(5307506, 5311138, 0, 0).open('GET', 'btn_hsptv.bmp');
      new DataRequest(5311138, 5313929, 0, 0).open('GET', 'btn_hsptv.png');
      new DataRequest(5313929, 5321339, 0, 0).open('GET', 'chr.png');
      new DataRequest(5321339, 5506025, 0, 0).open('GET', 'cookgirl.png');
      new DataRequest(5506025, 5578186, 0, 0).open('GET', 'dankun.png');
      new DataRequest(5578186, 5578299, 0, 0).open('GET', 'default.sk');
      new DataRequest(5578299, 5580357, 0, 0).open('GET', 'efx.bmp');
      new DataRequest(5580357, 5582047, 0, 0).open('GET', 'efx.png');
      new DataRequest(5582047, 5651129, 0, 0).open('GET', 'efx2.png');
      new DataRequest(5651129, 5657955, 0, 0).open('GET', 'explos.wav');
      new DataRequest(5657955, 5878838, 0, 0).open('GET', 'face1.png');
      new DataRequest(5878838, 6099714, 0, 0).open('GET', 'face2.png');
      new DataRequest(6099714, 6107124, 0, 0).open('GET', 'fontchr.png');
      new DataRequest(6107124, 6283854, 0, 0).open('GET', 'gamechr.png');
      new DataRequest(6283854, 6293940, 0, 0).open('GET', 'gradbg.bmp');
      new DataRequest(6293940, 6388143, 0, 0).open('GET', 'hsp3dish.png');
      new DataRequest(6388143, 6453329, 0, 0).open('GET', 'hsp3scr.jpg');
      new DataRequest(6453329, 6476561, 0, 0).open('GET', 'hsplogo8.bmp');
      new DataRequest(6476561, 6496396, 0, 0).open('GET', 'hsplogo8.png');
      new DataRequest(6496396, 7850948, 0, 0).open('GET', 'hsptv.bmp');
      new DataRequest(7850948, 7851026, 0, 0).open('GET', 'hsptv.cfg');
      new DataRequest(7851026, 8637514, 0, 0).open('GET', 'hsptv_img.bmp');
      new DataRequest(8637514, 9020919, 0, 0).open('GET', 'hsptv_img.png');
      new DataRequest(9020919, 9023913, 0, 0).open('GET', 'inject.wav');
      new DataRequest(9023913, 9385275, 0, 0).open('GET', 'janbg.png');
      new DataRequest(9385275, 9444420, 0, 0).open('GET', 'janpai.png');
      new DataRequest(9444420, 9496058, 0, 0).open('GET', 'jp6girl.bmp');
      new DataRequest(9496058, 9585132, 0, 0).open('GET', 'jp6girl.png');
      new DataRequest(9585132, 9700639, 0, 0).open('GET', 'jpchr.png');
      new DataRequest(9700639, 9722955, 0, 0).open('GET', 'jp_dead.wav');
      new DataRequest(9722955, 9727079, 0, 0).open('GET', 'jp_jump.wav');
      new DataRequest(9727079, 9914758, 0, 0).open('GET', 'kei_knight1_1.png');
      new DataRequest(9914758, 10100883, 0, 0).open('GET', 'kei_knight1_2.png');
      new DataRequest(10100883, 10286309, 0, 0).open('GET', 'kei_knight1_3.png');
      new DataRequest(10286309, 10474408, 0, 0).open('GET', 'kei_knight1_4.png');
      new DataRequest(10474408, 10661562, 0, 0).open('GET', 'kei_knight1_5.png');
      new DataRequest(10661562, 10849788, 0, 0).open('GET', 'kei_knight2_1.png');
      new DataRequest(10849788, 11036377, 0, 0).open('GET', 'kei_knight2_2.png');
      new DataRequest(11036377, 11222490, 0, 0).open('GET', 'kei_knight2_3.png');
      new DataRequest(11222490, 11410967, 0, 0).open('GET', 'kei_knight2_4.png');
      new DataRequest(11410967, 11598578, 0, 0).open('GET', 'kei_knight2_5.png');
      new DataRequest(11598578, 11730152, 0, 0).open('GET', 'kei_school1_1.png');
      new DataRequest(11730152, 11860182, 0, 0).open('GET', 'kei_school1_2.png');
      new DataRequest(11860182, 11989632, 0, 0).open('GET', 'kei_school1_3.png');
      new DataRequest(11989632, 12121748, 0, 0).open('GET', 'kei_school1_4.png');
      new DataRequest(12121748, 12252870, 0, 0).open('GET', 'kei_school1_5.png');
      new DataRequest(12252870, 12302078, 0, 0).open('GET', 'king_knight.bmp');
      new DataRequest(12302078, 12331448, 0, 0).open('GET', 'king_knight.png');
      new DataRequest(12331448, 12421742, 0, 0).open('GET', 'koma.bmp');
      new DataRequest(12421742, 12444107, 0, 0).open('GET', 'koma.png');
      new DataRequest(12444107, 12468993, 0, 0).open('GET', 'logop.bmp');
      new DataRequest(12468993, 12484589, 0, 0).open('GET', 'logop.png');
      new DataRequest(12484589, 12518492, 0, 0).open('GET', 'mapbg.png');
      new DataRequest(12518492, 12765476, 0, 0).open('GET', 'mini_kei.png');
      new DataRequest(12765476, 13039889, 0, 0).open('GET', 'mini_tamane.png');
      new DataRequest(13039889, 13066384, 0, 0).open('GET', 'mondot.png');
      new DataRequest(13066384, 13070246, 0, 0).open('GET', 'onibtn.gif');
      new DataRequest(13070246, 13075866, 0, 0).open('GET', 'onibtn.png');
      new DataRequest(13075866, 13103863, 0, 0).open('GET', 'parts.png');
      new DataRequest(13103863, 13507119, 0, 0).open('GET', 'pronama.bmp');
      new DataRequest(13507119, 13608291, 0, 0).open('GET', 'pronama.png');
      new DataRequest(13608291, 13902064, 0, 0).open('GET', 'punichr.png');
      new DataRequest(13902064, 14087108, 0, 0).open('GET', 'runner.png');
      new DataRequest(14087108, 14185708, 0, 0).open('GET', 'se01.wav');
      new DataRequest(14185708, 14297880, 0, 0).open('GET', 'se02.wav');
      new DataRequest(14297880, 14416964, 0, 0).open('GET', 'se03.wav');
      new DataRequest(14416964, 14473648, 0, 0).open('GET', 'se04.wav');
      new DataRequest(14473648, 14564060, 0, 0).open('GET', 'se05.wav');
      new DataRequest(14564060, 14656264, 0, 0).open('GET', 'se06.wav');
      new DataRequest(14656264, 14745780, 0, 0).open('GET', 'se07.wav');
      new DataRequest(14745780, 14838112, 0, 0).open('GET', 'se08.wav');
      new DataRequest(14838112, 14941836, 0, 0).open('GET', 'se09.wav');
      new DataRequest(14941836, 15146168, 0, 0).open('GET', 'se10.wav');
      new DataRequest(15146168, 15340260, 0, 0).open('GET', 'se11.wav');
      new DataRequest(15340260, 15599024, 0, 0).open('GET', 'se12.wav');
      new DataRequest(15599024, 15701468, 0, 0).open('GET', 'se13.wav');
      new DataRequest(15701468, 15794952, 0, 0).open('GET', 'se14.wav');
      new DataRequest(15794952, 15886772, 0, 0).open('GET', 'se15.wav');
      new DataRequest(15886772, 15889204, 0, 0).open('GET', 'sel.wav');
      new DataRequest(15889204, 15894176, 0, 0).open('GET', 'se_aaa.wav');
      new DataRequest(15894176, 16412004, 0, 0).open('GET', 'se_block2.wav');
      new DataRequest(16412004, 16787400, 0, 0).open('GET', 'se_bom.wav');
      new DataRequest(16787400, 16794836, 0, 0).open('GET', 'se_break.wav');
      new DataRequest(16794836, 16798672, 0, 0).open('GET', 'se_break2.wav');
      new DataRequest(16798672, 16813198, 0, 0).open('GET', 'se_break3.wav');
      new DataRequest(16813198, 16824844, 0, 0).open('GET', 'se_click.wav');
      new DataRequest(16824844, 16829496, 0, 0).open('GET', 'se_foot.wav');
      new DataRequest(16829496, 16833620, 0, 0).open('GET', 'se_jump.wav');
      new DataRequest(16833620, 16839057, 0, 0).open('GET', 'se_jump2.wav');
      new DataRequest(16839057, 16841267, 0, 0).open('GET', 'se_puyo.wav');
      new DataRequest(16841267, 16877873, 0, 0).open('GET', 'se_shot.wav');
      new DataRequest(16877873, 16892317, 0, 0).open('GET', 'se_shot2.wav');
      new DataRequest(16892317, 16911252, 0, 0).open('GET', 'se_tyuiin.wav');
      new DataRequest(16911252, 17009612, 0, 0).open('GET', 'shootchr.bmp');
      new DataRequest(17009612, 17027470, 0, 0).open('GET', 'shootdot.png');
      new DataRequest(17027470, 17087401, 0, 0).open('GET', 'sozai1.jpg');
      new DataRequest(17087401, 17121385, 0, 0).open('GET', 'sozai10.jpg');
      new DataRequest(17121385, 17157101, 0, 0).open('GET', 'sozai11.jpg');
      new DataRequest(17157101, 17188596, 0, 0).open('GET', 'sozai12.jpg');
      new DataRequest(17188596, 17235102, 0, 0).open('GET', 'sozai13.jpg');
      new DataRequest(17235102, 17446485, 0, 0).open('GET', 'sozai14.jpg');
      new DataRequest(17446485, 17590706, 0, 0).open('GET', 'sozai15.jpg');
      new DataRequest(17590706, 17649017, 0, 0).open('GET', 'sozai2.jpg');
      new DataRequest(17649017, 17712149, 0, 0).open('GET', 'sozai3.jpg');
      new DataRequest(17712149, 17749198, 0, 0).open('GET', 'sozai4.jpg');
      new DataRequest(17749198, 17834125, 0, 0).open('GET', 'sozai5.jpg');
      new DataRequest(17834125, 17937197, 0, 0).open('GET', 'sozai6.jpg');
      new DataRequest(17937197, 17988032, 0, 0).open('GET', 'sozai7.jpg');
      new DataRequest(17988032, 18034090, 0, 0).open('GET', 'sozai8.jpg');
      new DataRequest(18034090, 18093624, 0, 0).open('GET', 'sozai9.jpg');
      new DataRequest(18093624, 18108744, 0, 0).open('GET', 'start.axe');
      new DataRequest(18108744, 18895230, 0, 0).open('GET', 'tamadot.bmp');
      new DataRequest(18895230, 18980833, 0, 0).open('GET', 'tamadot.png');
      new DataRequest(18980833, 20553751, 0, 0).open('GET', 'tamaface.bmp');
      new DataRequest(20553751, 20722250, 0, 0).open('GET', 'tamaface.png');
      new DataRequest(20722250, 21018058, 0, 0).open('GET', 'tamane_b.png');
      new DataRequest(21018058, 21171843, 0, 0).open('GET', 'tamane_b1.png');
      new DataRequest(21171843, 21321834, 0, 0).open('GET', 'tamane_b2.png');
      new DataRequest(21321834, 21470534, 0, 0).open('GET', 'tamane_b3.png');
      new DataRequest(21470534, 21619900, 0, 0).open('GET', 'tamane_b4.png');
      new DataRequest(21619900, 21770271, 0, 0).open('GET', 'tamane_b5.png');
      new DataRequest(21770271, 21919245, 0, 0).open('GET', 'tamane_b6.png');
      new DataRequest(21919245, 22067698, 0, 0).open('GET', 'tamane_b7.png');
      new DataRequest(22067698, 22150774, 0, 0).open('GET', 'tamane_b8.png');
      new DataRequest(22150774, 22506987, 0, 0).open('GET', 'tamane_s.png');
      new DataRequest(22506987, 22689937, 0, 0).open('GET', 'tamane_s1.png');
      new DataRequest(22689937, 22863217, 0, 0).open('GET', 'tamane_s2.png');
      new DataRequest(22863217, 23035027, 0, 0).open('GET', 'tamane_s3.png');
      new DataRequest(23035027, 23207606, 0, 0).open('GET', 'tamane_s4.png');
      new DataRequest(23207606, 23381428, 0, 0).open('GET', 'tamane_s5.png');
      new DataRequest(23381428, 23553482, 0, 0).open('GET', 'tamane_s6.png');
      new DataRequest(23553482, 23729390, 0, 0).open('GET', 'tamane_s7.png');
      new DataRequest(23729390, 23832493, 0, 0).open('GET', 'tamane_s8.png');
      new DataRequest(23832493, 23929787, 0, 0).open('GET', 'tamane_school1_1.png');
      new DataRequest(23929787, 24027142, 0, 0).open('GET', 'tamane_school1_2.png');
      new DataRequest(24027142, 24123682, 0, 0).open('GET', 'tamane_school1_3.png');
      new DataRequest(24123682, 24221710, 0, 0).open('GET', 'tamane_school1_4.png');
      new DataRequest(24221710, 24319593, 0, 0).open('GET', 'tamane_school1_5.png');
      new DataRequest(24319593, 24525168, 0, 0).open('GET', 'tamane_wizard1_1.png');
      new DataRequest(24525168, 24730336, 0, 0).open('GET', 'tamane_wizard1_2.png');
      new DataRequest(24730336, 24934708, 0, 0).open('GET', 'tamane_wizard1_3.png');
      new DataRequest(24934708, 25140833, 0, 0).open('GET', 'tamane_wizard1_4.png');
      new DataRequest(25140833, 25346721, 0, 0).open('GET', 'tamane_wizard1_5.png');
      new DataRequest(25346721, 25546469, 0, 0).open('GET', 'tamane_wizard2_1.png');
      new DataRequest(25546469, 25746381, 0, 0).open('GET', 'tamane_wizard2_2.png');
      new DataRequest(25746381, 25945270, 0, 0).open('GET', 'tamane_wizard2_3.png');
      new DataRequest(25945270, 26145573, 0, 0).open('GET', 'tamane_wizard2_4.png');
      new DataRequest(26145573, 26345750, 0, 0).open('GET', 'tamane_wizard2_5.png');
      new DataRequest(26345750, 26455609, 0, 0).open('GET', 'tamane_y1.png');
      new DataRequest(26455609, 26559026, 0, 0).open('GET', 'tamane_y2.png');
      new DataRequest(26559026, 26956591, 0, 0).open('GET', 'tcard.png');
      new DataRequest(26956591, 27119469, 0, 0).open('GET', 'textile.png');
      new DataRequest(27119469, 27194217, 0, 0).open('GET', 'treeset.png');
      new DataRequest(27194217, 27206612, 0, 0).open('GET', 'trump.png');
      new DataRequest(27206612, 27754375, 0, 0).open('GET', 'typegirl.png');
      new DataRequest(27754375, 27759229, 0, 0).open('GET', 'white.bmp');
      new DataRequest(27759229, 27878091, 0, 0).open('GET', 'yama.jpg');
      new DataRequest(27878091, 27980306, 0, 0).open('GET', 'yama2.jpg');


    function processPackageData(arrayBuffer) {
      Module.finishedDataFileDownloads++;
      assert(arrayBuffer, 'Loading data file failed.');
      var byteArray = new Uint8Array(arrayBuffer);
      var curr;

      // copy the entire loaded file into a spot in the heap. Files will refer to slices in that. They cannot be freed though.
      var ptr = Module['_malloc'](byteArray.length);
      Module['HEAPU8'].set(byteArray, ptr);
      DataRequest.prototype.byteArray = Module['HEAPU8'].subarray(ptr, ptr+byteArray.length);

          DataRequest.prototype.requests["block3.ax"].onload();
          DataRequest.prototype.requests["alternate.bmp"].onload();
          DataRequest.prototype.requests["back.bmp"].onload();
          DataRequest.prototype.requests["backup.cfg"].onload();
          DataRequest.prototype.requests["baku.bmp"].onload();
          DataRequest.prototype.requests["baku.png"].onload();
          DataRequest.prototype.requests["ball64.png"].onload();
          DataRequest.prototype.requests["bg.png"].onload();
          DataRequest.prototype.requests["bg01.jpg"].onload();
          DataRequest.prototype.requests["bg02.jpg"].onload();
          DataRequest.prototype.requests["bg03.jpg"].onload();
          DataRequest.prototype.requests["bg04.jpg"].onload();
          DataRequest.prototype.requests["bg05.jpg"].onload();
          DataRequest.prototype.requests["bg06.jpg"].onload();
          DataRequest.prototype.requests["bg07.jpg"].onload();
          DataRequest.prototype.requests["bg08.jpg"].onload();
          DataRequest.prototype.requests["bg09.jpg"].onload();
          DataRequest.prototype.requests["bg10.jpg"].onload();
          DataRequest.prototype.requests["bgm04.mid"].onload();
          DataRequest.prototype.requests["bgm06.mid"].onload();
          DataRequest.prototype.requests["bgm1.mid"].onload();
          DataRequest.prototype.requests["bgm10.mid"].onload();
          DataRequest.prototype.requests["bgm11.mid"].onload();
          DataRequest.prototype.requests["bgm12.mid"].onload();
          DataRequest.prototype.requests["bgm13.mid"].onload();
          DataRequest.prototype.requests["bgm14.mid"].onload();
          DataRequest.prototype.requests["bgm15.mid"].onload();
          DataRequest.prototype.requests["bgm16.mid"].onload();
          DataRequest.prototype.requests["bgm17.mid"].onload();
          DataRequest.prototype.requests["bgm18.mid"].onload();
          DataRequest.prototype.requests["bgm19.mid"].onload();
          DataRequest.prototype.requests["bgm2.mid"].onload();
          DataRequest.prototype.requests["bgm20.mid"].onload();
          DataRequest.prototype.requests["bgm3.mid"].onload();
          DataRequest.prototype.requests["bgm5.mid"].onload();
          DataRequest.prototype.requests["bgm7.mid"].onload();
          DataRequest.prototype.requests["bgm8.mid"].onload();
          DataRequest.prototype.requests["bgm9.mid"].onload();
          DataRequest.prototype.requests["bgpeas.bmp"].onload();
          DataRequest.prototype.requests["bgpeas.png"].onload();
          DataRequest.prototype.requests["bgsmoke.bmp"].onload();
          DataRequest.prototype.requests["bgsmoke.png"].onload();
          DataRequest.prototype.requests["bgtex.bmp"].onload();
          DataRequest.prototype.requests["bgtex.png"].onload();
          DataRequest.prototype.requests["black.bmp"].onload();
          DataRequest.prototype.requests["bom.bmp"].onload();
          DataRequest.prototype.requests["bom.png"].onload();
          DataRequest.prototype.requests["btn_hard.bmp"].onload();
          DataRequest.prototype.requests["btn_hard.png"].onload();
          DataRequest.prototype.requests["btn_hsptv.bmp"].onload();
          DataRequest.prototype.requests["btn_hsptv.png"].onload();
          DataRequest.prototype.requests["chr.png"].onload();
          DataRequest.prototype.requests["cookgirl.png"].onload();
          DataRequest.prototype.requests["dankun.png"].onload();
          DataRequest.prototype.requests["default.sk"].onload();
          DataRequest.prototype.requests["efx.bmp"].onload();
          DataRequest.prototype.requests["efx.png"].onload();
          DataRequest.prototype.requests["efx2.png"].onload();
          DataRequest.prototype.requests["explos.wav"].onload();
          DataRequest.prototype.requests["face1.png"].onload();
          DataRequest.prototype.requests["face2.png"].onload();
          DataRequest.prototype.requests["fontchr.png"].onload();
          DataRequest.prototype.requests["gamechr.png"].onload();
          DataRequest.prototype.requests["gradbg.bmp"].onload();
          DataRequest.prototype.requests["hsp3dish.png"].onload();
          DataRequest.prototype.requests["hsp3scr.jpg"].onload();
          DataRequest.prototype.requests["hsplogo8.bmp"].onload();
          DataRequest.prototype.requests["hsplogo8.png"].onload();
          DataRequest.prototype.requests["hsptv.bmp"].onload();
          DataRequest.prototype.requests["hsptv.cfg"].onload();
          DataRequest.prototype.requests["hsptv_img.bmp"].onload();
          DataRequest.prototype.requests["hsptv_img.png"].onload();
          DataRequest.prototype.requests["inject.wav"].onload();
          DataRequest.prototype.requests["janbg.png"].onload();
          DataRequest.prototype.requests["janpai.png"].onload();
          DataRequest.prototype.requests["jp6girl.bmp"].onload();
          DataRequest.prototype.requests["jp6girl.png"].onload();
          DataRequest.prototype.requests["jpchr.png"].onload();
          DataRequest.prototype.requests["jp_dead.wav"].onload();
          DataRequest.prototype.requests["jp_jump.wav"].onload();
          DataRequest.prototype.requests["kei_knight1_1.png"].onload();
          DataRequest.prototype.requests["kei_knight1_2.png"].onload();
          DataRequest.prototype.requests["kei_knight1_3.png"].onload();
          DataRequest.prototype.requests["kei_knight1_4.png"].onload();
          DataRequest.prototype.requests["kei_knight1_5.png"].onload();
          DataRequest.prototype.requests["kei_knight2_1.png"].onload();
          DataRequest.prototype.requests["kei_knight2_2.png"].onload();
          DataRequest.prototype.requests["kei_knight2_3.png"].onload();
          DataRequest.prototype.requests["kei_knight2_4.png"].onload();
          DataRequest.prototype.requests["kei_knight2_5.png"].onload();
          DataRequest.prototype.requests["kei_school1_1.png"].onload();
          DataRequest.prototype.requests["kei_school1_2.png"].onload();
          DataRequest.prototype.requests["kei_school1_3.png"].onload();
          DataRequest.prototype.requests["kei_school1_4.png"].onload();
          DataRequest.prototype.requests["kei_school1_5.png"].onload();
          DataRequest.prototype.requests["king_knight.bmp"].onload();
          DataRequest.prototype.requests["king_knight.png"].onload();
          DataRequest.prototype.requests["koma.bmp"].onload();
          DataRequest.prototype.requests["koma.png"].onload();
          DataRequest.prototype.requests["logop.bmp"].onload();
          DataRequest.prototype.requests["logop.png"].onload();
          DataRequest.prototype.requests["mapbg.png"].onload();
          DataRequest.prototype.requests["mini_kei.png"].onload();
          DataRequest.prototype.requests["mini_tamane.png"].onload();
          DataRequest.prototype.requests["mondot.png"].onload();
          DataRequest.prototype.requests["onibtn.gif"].onload();
          DataRequest.prototype.requests["onibtn.png"].onload();
          DataRequest.prototype.requests["parts.png"].onload();
          DataRequest.prototype.requests["pronama.bmp"].onload();
          DataRequest.prototype.requests["pronama.png"].onload();
          DataRequest.prototype.requests["punichr.png"].onload();
          DataRequest.prototype.requests["runner.png"].onload();
          DataRequest.prototype.requests["se01.wav"].onload();
          DataRequest.prototype.requests["se02.wav"].onload();
          DataRequest.prototype.requests["se03.wav"].onload();
          DataRequest.prototype.requests["se04.wav"].onload();
          DataRequest.prototype.requests["se05.wav"].onload();
          DataRequest.prototype.requests["se06.wav"].onload();
          DataRequest.prototype.requests["se07.wav"].onload();
          DataRequest.prototype.requests["se08.wav"].onload();
          DataRequest.prototype.requests["se09.wav"].onload();
          DataRequest.prototype.requests["se10.wav"].onload();
          DataRequest.prototype.requests["se11.wav"].onload();
          DataRequest.prototype.requests["se12.wav"].onload();
          DataRequest.prototype.requests["se13.wav"].onload();
          DataRequest.prototype.requests["se14.wav"].onload();
          DataRequest.prototype.requests["se15.wav"].onload();
          DataRequest.prototype.requests["sel.wav"].onload();
          DataRequest.prototype.requests["se_aaa.wav"].onload();
          DataRequest.prototype.requests["se_block2.wav"].onload();
          DataRequest.prototype.requests["se_bom.wav"].onload();
          DataRequest.prototype.requests["se_break.wav"].onload();
          DataRequest.prototype.requests["se_break2.wav"].onload();
          DataRequest.prototype.requests["se_break3.wav"].onload();
          DataRequest.prototype.requests["se_click.wav"].onload();
          DataRequest.prototype.requests["se_foot.wav"].onload();
          DataRequest.prototype.requests["se_jump.wav"].onload();
          DataRequest.prototype.requests["se_jump2.wav"].onload();
          DataRequest.prototype.requests["se_puyo.wav"].onload();
          DataRequest.prototype.requests["se_shot.wav"].onload();
          DataRequest.prototype.requests["se_shot2.wav"].onload();
          DataRequest.prototype.requests["se_tyuiin.wav"].onload();
          DataRequest.prototype.requests["shootchr.bmp"].onload();
          DataRequest.prototype.requests["shootdot.png"].onload();
          DataRequest.prototype.requests["sozai1.jpg"].onload();
          DataRequest.prototype.requests["sozai10.jpg"].onload();
          DataRequest.prototype.requests["sozai11.jpg"].onload();
          DataRequest.prototype.requests["sozai12.jpg"].onload();
          DataRequest.prototype.requests["sozai13.jpg"].onload();
          DataRequest.prototype.requests["sozai14.jpg"].onload();
          DataRequest.prototype.requests["sozai15.jpg"].onload();
          DataRequest.prototype.requests["sozai2.jpg"].onload();
          DataRequest.prototype.requests["sozai3.jpg"].onload();
          DataRequest.prototype.requests["sozai4.jpg"].onload();
          DataRequest.prototype.requests["sozai5.jpg"].onload();
          DataRequest.prototype.requests["sozai6.jpg"].onload();
          DataRequest.prototype.requests["sozai7.jpg"].onload();
          DataRequest.prototype.requests["sozai8.jpg"].onload();
          DataRequest.prototype.requests["sozai9.jpg"].onload();
          DataRequest.prototype.requests["start.axe"].onload();
          DataRequest.prototype.requests["tamadot.bmp"].onload();
          DataRequest.prototype.requests["tamadot.png"].onload();
          DataRequest.prototype.requests["tamaface.bmp"].onload();
          DataRequest.prototype.requests["tamaface.png"].onload();
          DataRequest.prototype.requests["tamane_b.png"].onload();
          DataRequest.prototype.requests["tamane_b1.png"].onload();
          DataRequest.prototype.requests["tamane_b2.png"].onload();
          DataRequest.prototype.requests["tamane_b3.png"].onload();
          DataRequest.prototype.requests["tamane_b4.png"].onload();
          DataRequest.prototype.requests["tamane_b5.png"].onload();
          DataRequest.prototype.requests["tamane_b6.png"].onload();
          DataRequest.prototype.requests["tamane_b7.png"].onload();
          DataRequest.prototype.requests["tamane_b8.png"].onload();
          DataRequest.prototype.requests["tamane_s.png"].onload();
          DataRequest.prototype.requests["tamane_s1.png"].onload();
          DataRequest.prototype.requests["tamane_s2.png"].onload();
          DataRequest.prototype.requests["tamane_s3.png"].onload();
          DataRequest.prototype.requests["tamane_s4.png"].onload();
          DataRequest.prototype.requests["tamane_s5.png"].onload();
          DataRequest.prototype.requests["tamane_s6.png"].onload();
          DataRequest.prototype.requests["tamane_s7.png"].onload();
          DataRequest.prototype.requests["tamane_s8.png"].onload();
          DataRequest.prototype.requests["tamane_school1_1.png"].onload();
          DataRequest.prototype.requests["tamane_school1_2.png"].onload();
          DataRequest.prototype.requests["tamane_school1_3.png"].onload();
          DataRequest.prototype.requests["tamane_school1_4.png"].onload();
          DataRequest.prototype.requests["tamane_school1_5.png"].onload();
          DataRequest.prototype.requests["tamane_wizard1_1.png"].onload();
          DataRequest.prototype.requests["tamane_wizard1_2.png"].onload();
          DataRequest.prototype.requests["tamane_wizard1_3.png"].onload();
          DataRequest.prototype.requests["tamane_wizard1_4.png"].onload();
          DataRequest.prototype.requests["tamane_wizard1_5.png"].onload();
          DataRequest.prototype.requests["tamane_wizard2_1.png"].onload();
          DataRequest.prototype.requests["tamane_wizard2_2.png"].onload();
          DataRequest.prototype.requests["tamane_wizard2_3.png"].onload();
          DataRequest.prototype.requests["tamane_wizard2_4.png"].onload();
          DataRequest.prototype.requests["tamane_wizard2_5.png"].onload();
          DataRequest.prototype.requests["tamane_y1.png"].onload();
          DataRequest.prototype.requests["tamane_y2.png"].onload();
          DataRequest.prototype.requests["tcard.png"].onload();
          DataRequest.prototype.requests["textile.png"].onload();
          DataRequest.prototype.requests["treeset.png"].onload();
          DataRequest.prototype.requests["trump.png"].onload();
          DataRequest.prototype.requests["typegirl.png"].onload();
          DataRequest.prototype.requests["white.bmp"].onload();
          DataRequest.prototype.requests["yama.jpg"].onload();
          DataRequest.prototype.requests["yama2.jpg"].onload();

          Module['removeRunDependency']('datafile_block3.data');

    };
    Module['addRunDependency']('datafile_block3.data');

    if (!Module.preloadResults) Module.preloadResults = {};

      Module.preloadResults[PACKAGE_NAME] = {fromCache: false};
      if (fetched) {
        processPackageData(fetched);
        fetched = null;
      } else {
        fetchedCallback = processPackageData;
      }

        ENV.HSP_WX = "480";//スクリプトの動作解像度
        ENV.HSP_WY = "800";
        ENV.HSP_SX = "480";//表示解像度
        ENV.HSP_SY = "800";
        ENV.HSP_AUTOSCALE = "0";//スケーリングモード
        ENV.HSP_FPS = "0";//フレームレート
        ENV.HSP_LIMIT_STEP = "15000";//ブラウザに処理を返すまでの実行ステップ数

  }
  if (Module['calledRun']) {
    runWithFS();
  } else {
    if (!Module['preRun']) Module['preRun'] = [];
    Module["preRun"].push(runWithFS); // FS is not initialized yet, wait for it
  }

})();


				var fixAudioContext = function (e) {
				        SDL.openAudioContext();
					var context = SDL.audioContext;
					if (context) {
						// Create empty buffer
						var buffer = context.createBuffer(1, 1, 22050);
						var source = context.createBufferSource();
						source.buffer = buffer;
						// Connect to output (speakers)
						source.connect(context.destination);
						// Play sound
						if (source.start) {
							source.start(0);
						} else if (source.play) {
							source.play(0);
						} else if (source.noteOn) {
							source.noteOn(0);
						}
						//const soundEffect = new Audio();
						//soundEffect.play();
					      console.log('audio unlock:');
					}

					var target = document;
					//var target = document.getElementById('canvas');

					// Remove events
					target.removeEventListener('touchstart', fixAudioContext);
					target.removeEventListener('touchend', fixAudioContext);
					target.removeEventListener('mousedown', fixAudioContext);
				};
				//var target = document.getElementById('canvas');
				var target = document;
				// iOS 6-8
				target.addEventListener('touchstart', fixAudioContext);
				// iOS 9
				target.addEventListener('touchend', fixAudioContext);
				target.addEventListener('mousedown', fixAudioContext);


    </script>
    <script async type="text/javascript" src="hsp3dish.js"></script>
    <script>
      // Check that service workers are supported
      if ('serviceWorker' in navigator) {
        // Use the window load event to keep the page load performant
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js');
        });
      }
    </script>
    <!--
    powered by hsp3dish.js / OpenHSP
    https://hsp.tv/make/hsp3dish.html
    -->
  </body>
</html>
